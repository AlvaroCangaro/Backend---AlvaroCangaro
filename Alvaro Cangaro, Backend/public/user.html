<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Apple Arg</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
		<link rel="icon" type="image/png" sizes="48x48" href="imagenes/apple.png">
	</head>
	<body>
		<nav class="navbar bg-dark">
			<div class="container-fluid">
			    <a class="navbar-brand tituloN" style="text-decoration: none; color: white;" href=""><img src="http://pngimg.com/uploads/apple_logo/small/apple_logo_PNG19680.png" style="height: 55px;" alt="Apple" class="logoHeader">Apple Arg</a>
			</div>
			<div></div>
		</nav>
		<div class="container text-center my-3">
			<div class="jumbotron" style="background-color: #343a40; color: white">
				<h2>Bienvenido <span id="userUsername"></span></h2>
				<button class="btn btn-danger my-5" id="userLogout">
					Cerrar sesion
				</button>
			</div>
		</div>
	</body>
	<script>
		const userUsername = document.getElementById('userUsername');
		const userLogout = document.getElementById('userLogout');
		fetch(`/login`)
			.then((response) => response.json())
			.then((data) => {
				if (data.status === 'ok') {
					userUsername.innerHTML = data.user.username;
					userLogout.addEventListener('click', () => {
						fetch(`/logout`)
							.then((response) => response.json())
							.then((data) => {
								if (data.status === 'ok') {
									window.location.href = '/';
								}
							});
					});
				} else {
					window.location.href = '/login';
				}
			});
	</script>
</html>
